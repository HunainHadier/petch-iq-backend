import express from "express";
import {
  getProfile,
  updateProfile,
  getInvoices,
  getSubscription,
  renewSubscription,
  cancelSubscription,
  getPayments,
   uploadProfileImage
} from "../controllers/accountController.js";
import upload from "../middleware/upload.js";


const router = express.Router();

// profile
router.get("/profile", getProfile);
// Add multer middleware for file upload
router.put("/profile", upload.single("profile_image"), updateProfile);


router.post("/profile/image", upload.single("profile_image"), uploadProfileImage);


// invoices & payments
router.get("/invoices", getInvoices);
router.get("/payments", getPayments);

// subscription
router.get("/subscription", getSubscription);
router.post("/subscription/renew", renewSubscription);
router.post("/subscription/cancel", cancelSubscription);

export default router;
